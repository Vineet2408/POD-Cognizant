package com.cts.portal.service;

import java.util.List;

import com.cts.portal.model.IPTreatmentPackages;
import com.cts.portal.model.PatientDetail;

import okhttp3.OkHttpClient;
import retrofit2.Call;
import retrofit2.Response;
import retrofit2.Retrofit;
import retrofit2.converter.gson.GsonConverterFactory;

public class IPTMSPatientService {

	private final String BASEURL="http://localhost:8080"; 
	IPTreatmentPackages packageDetail = null;
	List<IPTreatmentPackages> iPTreatmentPackagesList=null;
	
	OkHttpClient.Builder httpClient = new OkHttpClient.Builder();
	
	Retrofit retrofit = new Retrofit.Builder()
	  .baseUrl(BASEURL)
	  .addConverterFactory(GsonConverterFactory.create())
	  .client(httpClient.build())
	  .build();
	
	public PatientDetail getPatientDetail(long ptId)
	{
		PatientDetail patientDetail=null;
		IPTMSOfferingInterface service = retrofit.create(IPTMSOfferingInterface.class);
		Call<IPTreatmentPackages> callsync=service.getIPTreatmentPackageByName(ptId);
		try {
		    Response<IPTreatmentPackages> response = callsync.execute();
		    IPTreatmentPackages packageBean = response.body();
		    packageDetail=packageBean;
		} catch (Exception ex) { System.out.println("error in IPTreatmentPackages list"); }
		
		return packageDetail;
	}
}
